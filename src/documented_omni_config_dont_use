# Commented sample omni_config -- NOT USABLE
# This copy of omni_config is included for documentation.
# Lines beginning with '#' should be removed for runtime.
# Note that the parser is very sensitive.

# This is a sample Omni config file
# This file is in JSON format.
# It tells Omni how to talk to various Clearinghouses.
# And by extension, which Experimenter credentials to use.

# At runtime, Omni will only use the general 'omni' section,
# and the section for the Control Framework you have chosen
# (via commandline -f or the default_cf setting below).
# EG in the example below, only the gcf settings are relevant,
# and the sfa/pg settings would be ignored.
# Picking a Control Framework also picks which Clearinghouse
# you will contact to generate Slices and get a list
# of known Aggregates.

# All certs below should be in pem format.
# All keys are private keys for signing things.

# This config has first omni general configs, and then
# per control framework configs.
# For each CF, you specify where the clearinghouse/SA XMLRPC
# interface can be reached, and the certificate and key to ID 
# yourself to that CH. Some CFs have other fields.
{
	"omni": {
		# default_cf is over-ridden with theh -f argument
		# Valid values are any (non-omni) top-level entry in
		# this file: gcf, sfa, pg
		"default_cf": "gcf",

		# slice_users is used in createsliver. 
		# It is the 4th argument to the GENI AM API CreateSliver call.
		# (Ignored by the GENI Reference AM for example.)
		# It is used to install per user public keys 
		# on allocated nodes.
		# Note that multiple users can be specified here.
		"slice_users": [ 
		    {
				"name": "Alice",
				# Be sure this is the right URN in your cert
				# EG run openssl x509 -in [user cert file] -text
				# and then look at the Subject: CN field
				"urn": "urn:publicid:IDN+geni.net:gpo:gcf+user+alice"

				 # Keys is a comma separated list of names of user
				 # Public SSH Key files (not private)
				 # These are arguments to CreateSliver,
				 # and may be installed by the framework
				 # on reserved resources to allow access.
				"keys": ["~/.omni/jkarlin.pub"]
			}
		]
	},

	"sfa": {
	       # urn of your MyPLC or PL Central
	       # This is SFA_INTERFACE_HRN:site_name
	       # You can find this in practice by running:
	       # openssl x509 -in [user plc cert file] -text
	       # and then look at the Issuer CN
		"authority": "plc.gpo.site2",

		# urn and cert of the user
		# This is the authority above.<username from myplc email>
		# Subject CN in your cert (see above)
	    	"user": "plc.gpo.site2.jkarlin",
		"cert": "~/.omni/jkarlin.cert",

		# your private key
		"key":	"~/.omni/jkarlin.pkey",

		# URLs of your PL registry and slice manager
		# Be sure these are reachable
		"registry": "http://128.89.81.175:12345",
		"slicemgr": "http://128.89.81.175:12347"
	},

	"gcf": {
	        # The authority part of the GCF URN
		# where the last word may be used in 
		# generated slice login usernames.
		# Another example: openflow:bbn
    		"authority": "geni.net:gpo:gcf",
		# where gch is listening
    		"ch": "https://localhost:8000",
		# User certificate and key.
		# Note that these can be certificates from any
		# trusted clearinghouse (that is, the CH's certificate
		# must be trusted at the GENI CH and AM)
		"cert": "~/.omni/gcf.jkarlin.cert",
		"key":	"~/.omni/gcf.jkarlin.pkey"    	
	},

	"pg": {
	      # Rename this as verbose to enable debugging
   	     "xxxverbose": true,

             "ch": "https://www.emulab.net:443/protogeni/xmlrpc/ch",

	     # The sa is the slice authority. 
             "sa": "https://myboss.elabinelab.geni.emulab.net:443/protogeni/xmlrpc/sa",
             "cert": "~/.omni/encrypted.pem",
             "key":  "~/.omni/pgcert.pem"
	}
}
